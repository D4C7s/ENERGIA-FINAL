<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simulador de Energ√≠a ‚Äî Impacto y Tiempo</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    :root{--accent:#06b6d4;--muted:#94a3b8;--danger:#ef4444;--ok:#22c55e}
    *{box-sizing:border-box}

    body{
      margin:0;
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial;
      background:linear-gradient(180deg,#071032,#071a2a);
      color:#e6eef6;
      min-height:100vh;
      overflow-y:auto;
    }

    .container{
      width:100%;
      min-height:100vh;
      padding:24px;
    }

    header{display:flex;align-items:center;gap:16px;margin-bottom:20px}
    h1{margin:0;font-size:22px}

    .visual-zone{
      display:grid;
      grid-template-columns:1fr 1fr 1fr;
      gap:16px;
      margin-bottom:24px;
    }
    .visual-card{
      background:rgba(255,255,255,0.05);
      border-radius:16px;
      padding:18px;
      min-height:160px;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      text-align:center;
    }
    .visual-icon{font-size:64px;margin-bottom:8px}
    .visual-title{font-weight:700}

    .cables{
      width:100%;height:6px;
      background:repeating-linear-gradient(90deg,#38bdf8 0px,#38bdf8 20px,transparent 20px,transparent 40px);
      border-radius:999px;box-shadow:0 0 10px #38bdf8;margin:16px 0;
    }

    .bottom-zone{
      display:grid;
      grid-template-columns:420px 1fr;
      gap:18px;
      margin-bottom:48px;
    }

    .card{
      background:rgba(255,255,255,0.05);
      border-radius:14px;
      padding:18px;
    }

    label{display:block;font-size:13px;color:var(--muted);margin-top:12px}
    select{
      width:100%;padding:10px;margin-top:6px;
      border-radius:8px;border:none;
      background:rgba(0,0,0,0.3);color:white;
    }

    .btn{
      margin-top:16px;width:100%;padding:12px;border-radius:10px;
      background:var(--accent);border:none;color:#042022;font-weight:700;cursor:pointer;
    }

    .results{display:flex;flex-direction:column;gap:10px;margin-top:10px}
    .result-row{
      display:flex;justify-content:space-between;padding:10px;border-radius:8px;
      background:rgba(0,0,0,0.25);
    }

    .impact-section{margin-top:40px;}

    .impact-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:16px;
      margin-top:16px;
    }

    .impact-card{
      background:rgba(0,0,0,0.35);
      border-radius:14px;
      padding:16px;
      text-align:center;
    }

    .impact-value{font-size:18px;font-weight:700;margin-top:6px}

    @media(max-width:900px){
      .visual-zone{grid-template-columns:1fr}
      .bottom-zone{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
<div class="container">

  <header>
    <i class="fa-solid fa-bolt fa-2x" style="color:var(--accent)"></i>
    <div>
      <h1>Simulador de Energ√≠a</h1>
      <div style="color:var(--muted)">Tiempo necesario + impacto ambiental por simulaci√≥n</div>
    </div>
  </header>

  <div class="visual-zone">
    <div class="visual-card">
      <div id="energyIcon" class="visual-icon">‚òÄÔ∏è</div>
      <div id="energyTitle" class="visual-title">Energ√≠a Solar</div>
      <div style="color:var(--muted)">Fuente</div>
    </div>

    <div class="visual-card">
      <div class="visual-title">Transmisi√≥n</div>
      <div class="cables"></div>
      <div style="color:var(--muted)">Red el√©ctrica</div>
    </div>

    <div class="visual-card">
      <div id="deviceIcon" class="visual-icon">üì±</div>
      <div id="deviceTitle" class="visual-title">Celular</div>
      <div style="color:var(--muted)">Dispositivo</div>
    </div>
  </div>

  <div class="bottom-zone">

    <div class="card">
      <h3>Seleccion√° la situaci√≥n</h3>

      <label>Dispositivo a alimentar</label>
      <select id="device">
        <option value="cell">Celular (15 Wh)</option>
        <option value="computer">Computadora (300 Wh)</option>
        <option value="tv">Televisi√≥n (150 Wh)</option>
        <option value="house">Casa (1 d√≠a) 12 kWh</option>
        <option value="school">Colegio (1 d√≠a) 350 kWh</option>
        <option value="stadium">Estadio de Boca (partido) 40 MWh</option>
      </select>

      <label>Tipo de energ√≠a</label>
      <select id="energy">
        <option value="solar">Solar</option>
        <option value="wind">E√≥lica</option>
        <option value="hydro">Hidr√°ulica</option>
        <option value="geothermal">Geot√©rmica</option>
        <option value="biomass">Biomasa</option>
        <option value="marine">Energ√≠a del mar</option>
        <option value="fossil">Combustibles f√≥siles</option>
        <option value="nuclear">Nuclear</option>
      </select>

      <button id="calc" class="btn">Calcular</button>
    </div>

    <div class="card">
      <h3>Resultados</h3>
      <div id="results" class="results">
        <div style="color:var(--muted)">Esperando c√°lculo...</div>
      </div>
    </div>

  </div>

  <section class="impact-section">
    <h2>Desperdicios e Impacto Ambiental (por simulaci√≥n)</h2>
    <div id="impactGrid" class="impact-grid">
      <div class="impact-card"><div>Emisi√≥n de CO‚ÇÇ</div><div id="co2" class="impact-value">‚Äî</div></div>
      <div class="impact-card"><div>SO‚ÇÇ</div><div id="so2" class="impact-value">‚Äî</div></div>
      <div class="impact-card"><div>NOx</div><div id="nox" class="impact-value">‚Äî</div></div>
      <div class="impact-card"><div>Residuo general</div><div id="waste" class="impact-value">‚Äî</div></div>
      <div class="impact-card"><div>Residuo radiactivo</div><div id="nuclearWaste" class="impact-value">‚Äî</div></div>
      <div class="impact-card"><div>Tiempo de peligrosidad</div><div id="dangerTime" class="impact-value">‚Äî</div></div>
    </div>
  </section>

  <section class="impact-section">
    <h2>Gr√°ficos Comparativos (mismo dispositivo)</h2>
    <div class="impact-grid">
      <div class="impact-card">
        <h3>Costo en d√≥lares (USD)</h3>
        <canvas id="costChart"></canvas>
      </div>
      <div class="impact-card">
        <h3>Emisi√≥n de CO‚ÇÇ</h3>
        <canvas id="co2Chart"></canvas>
      </div>
    </div>
  </section>

</div>

<script>
  const DEVICES = {
    cell:{name:'Celular',Wh:15},
    computer:{name:'Computadora',Wh:300},
    tv:{name:'Televisi√≥n',Wh:150},
    house:{name:'Casa (1 d√≠a)',Wh:12000},
    school:{name:'Colegio (1 d√≠a)',Wh:350000},
    stadium:{name:'Estadio de Boca (partido)',Wh:40000000}
  };

  const ENERGY_POWER = {solar:500, wind:2000, hydro:100000, geothermal:50000, biomass:30000, marine:20000, fossil:1000000, nuclear:300000000};

  const CO2 = {solar:0.05, wind:0.02, hydro:0.02, geothermal:0.04, biomass:0.1, marine:0.03, fossil:0.9, nuclear:0.01};
  const SO2 = {fossil:0.02};
  const NOX = {fossil:0.015};

  const NUCLEAR_WASTE = "Alta actividad";
  const NUCLEAR_DANGER = "10.000 ‚Äì 100.000 a√±os";

  const ENERGY_NAMES = {solar:'Energ√≠a Solar', wind:'Energ√≠a E√≥lica', hydro:'Energ√≠a Hidr√°ulica', geothermal:'Energ√≠a Geot√©rmica', biomass:'Biomasa', marine:'Energ√≠a del Mar', fossil:'Combustibles F√≥siles', nuclear:'Energ√≠a Nuclear'};
  const ENERGY_ICONS = {solar:'‚òÄÔ∏è',wind:'üå¨Ô∏è',hydro:'üíß',geothermal:'üåã',biomass:'üåø',marine:'üåä',fossil:'üè≠',nuclear:'‚ò¢Ô∏è'};
  const DEVICE_ICONS = {cell:'üì±',computer:'üíª',tv:'üì∫',house:'üè†',school:'üè´',stadium:'üèüÔ∏è'};

  function fmtTime(h){ if(h<1) return `${Math.round(h*60)} minutos`; if(h<24) return `${h.toFixed(2)} horas`; return `${(h/24).toFixed(2)} d√≠as`; }
  function fmtWh(v){ if(v>=1e6) return (v/1e6).toFixed(2)+' MWh'; if(v>=1e3) return (v/1e3).toFixed(2)+' kWh'; return Math.round(v)+' Wh'; }

  const deviceEl = document.getElementById('device');
  const energyEl = document.getElementById('energy');
  const resultsEl = document.getElementById('results');

  function updateVisual(){
    const d = deviceEl.value; const e = energyEl.value;
    deviceIcon.innerText = DEVICE_ICONS[d]; deviceTitle.innerText = DEVICES[d].name;
    energyIcon.innerText = ENERGY_ICONS[e]; energyTitle.innerText = ENERGY_NAMES[e];
  }

  function calcular(){
    const d = DEVICES[deviceEl.value]; const e = energyEl.value;
    const energiaNecesaria = d.Wh; const potenciaFuente = ENERGY_POWER[e];
    const tiempoHoras = energiaNecesaria / potenciaFuente;

    resultsEl.innerHTML = `
      <div class='result-row'><strong>Dispositivo</strong><span>${d.name}</span></div>
      <div class='result-row'><strong>Energ√≠a</strong><span>${ENERGY_NAMES[e]}</span></div>
      <div class='result-row'><strong>Energ√≠a requerida</strong><span>${fmtWh(energiaNecesaria)}</span></div>
      <div class='result-row'><strong>Potencia de la fuente</strong><span>${fmtWh(potenciaFuente)} / h</span></div>
      <div class='result-row'><strong>Tiempo necesario</strong><span>${fmtTime(tiempoHoras)}</span></div>
    `;

    const kWh = energiaNecesaria / 1000;
    const emisiones = (kWh * CO2[e]).toFixed(3);

    document.getElementById('co2').innerText = `${emisiones} kg CO‚ÇÇ`;

    if(['solar','wind','hydro','geothermal','biomass','marine'].includes(e)){
      document.getElementById('waste').innerText = 'Fabricaci√≥n de equipos';
      document.getElementById('so2').innerText = '0 kg';
      document.getElementById('nox').innerText = '0 kg';
    }

    if(e === 'fossil'){
      document.getElementById('waste').innerText = 'Cenizas + gases';
      document.getElementById('so2').innerText = (kWh * SO2.fossil).toFixed(4) + ' kg';
      document.getElementById('nox').innerText = (kWh * NOX.fossil).toFixed(4) + ' kg';
    }

    if(e === 'nuclear'){
      document.getElementById('waste').innerText = 'Residuos tecnol√≥gicos';
      document.getElementById('nuclearWaste').innerText = NUCLEAR_WASTE;
      document.getElementById('dangerTime').innerText = NUCLEAR_DANGER;
      document.getElementById('so2').innerText = '0 kg';
      document.getElementById('nox').innerText = '0 kg';
    } else {
      document.getElementById('nuclearWaste').innerText = 'No aplica';
      document.getElementById('dangerTime').innerText = '‚Äî';
    }
  }

  deviceEl.addEventListener('change', updateVisual);
  energyEl.addEventListener('change', updateVisual);
  document.getElementById('calc').addEventListener('click', calcular);
  updateVisual();


  const ENERGY_COST = {solar:0.04, wind:0.03, hydro:0.025, geothermal:0.05, biomass:0.06, marine:0.07, fossil:0.12, nuclear:0.08};

  let costChart, co2Chart;

  function buildCharts(deviceKey){
    const device = DEVICES[deviceKey];
    const labels = Object.values(ENERGY_NAMES);

    const costData = Object.keys(ENERGY_NAMES).map(e=>{
      const kWh = device.Wh/1000;
      return +(kWh * ENERGY_COST[e]).toFixed(3);
    });

    const co2Data = Object.keys(ENERGY_NAMES).map(e=>{
      const kWh = device.Wh/1000;
      return +(kWh * CO2[e]).toFixed(3);
    });

    if(costChart) costChart.destroy();
    if(co2Chart) co2Chart.destroy();

    costChart = new Chart(document.getElementById('costChart'),{
      type:'bar',
      data:{labels:labels,datasets:[{label:'USD',data:costData}]},
      options:{responsive:true,plugins:{legend:{display:false}}}
    });

    co2Chart = new Chart(document.getElementById('co2Chart'),{
      type:'bar',
      data:{labels:labels,datasets:[{label:'kg CO‚ÇÇ',data:co2Data}]},
      options:{responsive:true,plugins:{legend:{display:false}}}
    });
  }

  const originalCalcular = calcular;
  calcular = function(){
    originalCalcular();
    buildCharts(deviceEl.value);
  };

</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Re-vinculaci√≥n segura de los gr√°ficos tras cargar Chart.js
  document.getElementById('calc').addEventListener('click',()=>{
    try{
      buildCharts(deviceEl.value);
    }catch(e){
      console.error('Error al dibujar gr√°ficos:', e);
    }
  });
</script>
</body>
</html>
